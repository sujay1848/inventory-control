(this["webpackJsonpinventory-control"]=this["webpackJsonpinventory-control"]||[]).push([[0],{30:function(e,t,n){e.exports=n.p+"static/media/barcode-light-blue.55775926.svg"},31:function(e,t,n){e.exports=n.p+"static/media/barcode-white.9f08b578.svg"},32:function(e,t,n){e.exports=n.p+"static/media/magnifying-glass.ed09bbc2.svg"},33:function(e,t,n){e.exports=n(46)},43:function(e,t,n){},44:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(18),i=n.n(r),o=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function c(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var l=n(2),u=n(3),m=n(5),f=n(4),d=n(6),h=n(14),p=n(12),b="ADD_SKUS",v="SCAN_FIXTURE";function E(e){return{type:b,payload:e}}function g(e){return{type:v,payload:e}}var S=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).rows=function(e){return e.sort((function(e,t){return e.count-t.count})),e.map((function(e){return n.row(e)}))},n.row=function(e){return s.a.createElement("div",{key:e.fixtureId,className:"flex justify-between w-100 h3 bb bw1 b--black-20 ph3"},s.a.createElement("div",{className:"flex flex-column justify-center w-70"},s.a.createElement("div",{className:"f4 b"},e.fixtureId),s.a.createElement("div",{className:"f5"},e.description)),s.a.createElement("div",{className:"flex flex-column justify-center w-30"},s.a.createElement("div",{className:"tc f5 b"},e.count),e.count>0?s.a.createElement("div",{className:"flex justify-center items-center h2 br2 bg-green white b"},s.a.createElement("span",null,"Complete")):s.a.createElement("div",{className:"flex justify-center items-center h2 br2 bg-dark-red white b"},s.a.createElement("span",null,"Incomplete"))))},n.state={},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return!Array.isArray(this.props.data)||this.props.data.length<1?s.a.createElement(s.a.Fragment,null):s.a.createElement("div",{className:"flex flex-column w-100"},s.a.createElement("div",{className:"w-100 h2 flex items-center bg-light-gray bb b--black-20 ph3"},s.a.createElement("div",{className:"w-70 tc f5 b"},"Fixture"),s.a.createElement("div",{className:"w-30 tc f5 b"},"Status")),s.a.createElement("div",{className:"flex flex-column"},this.rows(this.props.data)))}}]),t}(a.Component),x=function(e,t,n,a,s){for(var r=[],i=0,o=Object.entries(n);i<o.length;i++){var c=o[i];r.push({upc:c[0],count:c[1]})}return fetch("http://3.134.88.218:3001/submission",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({fixtureId:t,userId:e,stocks:r})}).then((function(e){return 200===e.status?(a(),null):e.text()})).then((function(e){if(null!==e)throw new Error(e)})).catch((function(e){console.log(e),s(e)}))};var k=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleFixtureIdChange=function(e){return n.setState({fixtureId:e.target.value})},n.handleSubmit=function(e){n.props.setFixture({fixtureId:n.state.fixtureId})},n.isButtonDisabled=function(){return!n.state.fixtureId},n.state={fixtureId:null,status:[]},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e,t=this;e=function(e){return t.setState({status:e})},fetch("http://3.134.88.218:3001/status",{method:"get",headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status)throw new Error("Invalid response status");return e.text()})).then((function(t){e(JSON.parse(t))})).catch((function(t){console.log(t),e([])}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:"flex flex-column ma3"},s.a.createElement("input",{type:"text",placeholder:"Type fixture ID here...",onChange:this.handleFixtureIdChange,className:"w-100 h2 mb2 br2 ph1"}),s.a.createElement(h.b,{to:function(t){return e.isButtonDisabled()?t.pathname:"/start"},className:"noLink"},s.a.createElement("button",{className:"w-100 f5 b white bw0 br2 dim h2"+(this.isButtonDisabled()?"":" bg-blue"),disabled:this.isButtonDisabled(),onClick:this.handleSubmit},"PROCEED"))),s.a.createElement(S,{data:this.state.status}))}}]),t}(a.Component),C=Object(p.b)(null,(function(e){return{setFixture:function(t){return e(g(t))}}}))(k),O=n(7),w=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.fixtureId?s.a.createElement("div",null,s.a.createElement("div",{className:"ma2"},s.a.createElement("span",{className:"f4 mr2"},"FIXTURE ID:"),s.a.createElement("span",{className:"underline f4"},this.props.fixtureId)),s.a.createElement("div",{className:"flex flex-column ma3"},s.a.createElement(h.b,{to:"/scan",className:"noLink"},s.a.createElement("button",{className:"w-100 f5 b white bw0 br2 dim h2 bg-blue mb2"},"START SCANNING")),s.a.createElement(h.b,{to:"/",className:"noLink"},s.a.createElement("button",{className:"w-100 f5 b white bw0 br2 dim h2 bg-red"},"BACK HOME")))):s.a.createElement(O.a,{push:!0,to:"/"})}}]),t}(a.Component),N=Object(p.b)((function(e){return{fixtureId:e.fixtureId}}))(w),I=n(16),y=n.n(I),j=n(29),T=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).POSITIONS={RIGHT:"right",LEFT:"left",NEUTRAL:"neutral"},n.onTouchStart=function(e){n.x=e.touches[0].clientX,n.y=e.touches[0].clientY},n.onTouchMove=function(e){var t=e.touches[0].clientX;t-n.x>80?(n.x=t,n.state.position===n.POSITIONS.NEUTRAL?n.setState({position:n.POSITIONS.RIGHT},n.props.onRightSwipe):n.state.position===n.POSITIONS.LEFT&&n.setState({position:n.POSITIONS.NEUTRAL},n.props.onNeutral)):t-n.x<-80&&(n.x=t,n.state.position===n.POSITIONS.NEUTRAL?n.setState({position:n.POSITIONS.LEFT},n.props.onLeftSwipe):n.state.position===n.POSITIONS.RIGHT&&n.setState({position:n.POSITIONS.NEUTRAL},n.props.onNeutral))},n.state={position:n.POSITIONS.NEUTRAL},n.x=0,n.y=0,n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,className:this.props.className},this.props.children)}}]),t}(a.Component),L=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).vol=5,n.OPERATIONS={ADJUST:"adjust",DELETE:"delete"},n.filerSkuList=Object(j.a)((function(e,t,n){return e=Object.entries(e).reverse(),console.log("Filtering..."),""===t?e:e.filter((function(e){return 0===n?e[0].includes(t):1===n&&(Number(t)&&e[1]===Number(t))}))})),n.pagedSkuList=function(e,t,n){return e.slice((t-1)*n,t*n)},n.onCountChange=function(e,t){var a=Object.assign({},n.props.skuCountList);a[e[0]]=e[1]+t,n.props.setSkuCountList({skuCountList:a})},n.onRemoveSku=function(e){var t=Object.assign({},n.props.skuCountList);delete t[e],n.props.setSkuCountList({skuCountList:t}),setTimeout((function(){return n.setState({selectedKey:null})}),50)},n.onClickDelete=function(e){y.a.fire({title:"Delete?",text:"SKU "+e,icon:"warning",showCloseButton:!0,confirmButtonColor:"#3085d6",confirmButtonText:"Confirm"}).then((function(t){t.value&&(n.onRemoveSku(e),n.props.afterDelete&&n.props.afterDelete())}))},n.setSearchTerm=function(e){return n.setState({searchTerm:e})},n.row=function(e){return s.a.createElement(T,{key:e[0],className:"w-100 h3 flex items-center bb b--black-20",onRightSwipe:function(){return n.setState({selectedKey:e[0],selectedOperation:n.OPERATIONS.ADJUST})},onLeftSwipe:function(){return n.setState({selectedKey:e[0],selectedOperation:n.OPERATIONS.DELETE})},onNeutral:function(){return n.setState({selectedKey:null,selectedOperation:null})}},s.a.createElement("div",{className:"w-50 tc"},e[0]),s.a.createElement("div",{className:"w-50 flex justify-around items-center"},n.state.selectedKey!==e[0]&&s.a.createElement("span",{className:""},e[1]),n.state.selectedKey===e[0]&&n.state.selectedOperation===n.OPERATIONS.DELETE&&s.a.createElement("button",{className:"w-80 h2 br2 bn bg-dark-red white b",onClick:function(){return n.onClickDelete(e[0])}},"Delete"),n.state.selectedKey===e[0]&&n.state.selectedOperation===n.OPERATIONS.ADJUST&&s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{className:"bn bg-white f3 b",onClick:function(){return n.onCountChange(e,1)}},"+"),s.a.createElement("span",null,e[1]),s.a.createElement("button",{className:"bn bg-white f3 b"+(e[1]<2?" hidden":""),onClick:function(){return n.onCountChange(e,-1)}},"-"))))},n.state={selectedKey:null,selectedOperation:null,page:1,searchField:0,searchTerm:""},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){var a=Math.ceil(this.filerSkuList(this.props.skuCountList,this.state.searchTerm,this.state.searchField).length/this.vol);this.state.page>a&&this.setState({page:a}),this.state.page<1&&a>0&&this.setState({page:1})}},{key:"render",value:function(){var e=this,t=this.filerSkuList(this.props.skuCountList,this.state.searchTerm,this.state.searchField),n=Math.ceil(t.length/this.vol),a=this.pagedSkuList(t,this.state.page,this.vol);return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"w-100 flex-column mv2"},s.a.createElement("div",{className:"w-100 h2 flex items-center bg-light-gray bb b--black-20"},s.a.createElement("div",{className:"w-50 tc f5 b"},"UPC"),s.a.createElement("div",{className:"w-50 tc f5 b"},"Quantity")),a.map((function(t){return e.row(t)})),n>0&&s.a.createElement("div",{className:"flex justify-center items-center helvetica pa2 bg-light-gray mb2"},s.a.createElement("input",{type:"button",className:"b--none bg-transparent f5 b"+(this.state.page<2?" hidden":""),value:"|<",onClick:function(){return e.setState({page:1})}}),s.a.createElement("input",{type:"button",className:"b--none bg-transparent f5 b"+(this.state.page<2?" hidden":""),value:"<",onClick:function(){return e.setState({page:e.state.page-1})}}),s.a.createElement("span",{className:"f5"}," ",this.state.page," / ",n," page"," "),s.a.createElement("input",{type:"button",className:"b--none bg-transparent f5 b"+(this.state.page===n?" hidden":""),value:">",onClick:function(){return e.setState({page:e.state.page+1})}}),s.a.createElement("input",{type:"button",className:"b--none bg-transparent f5 b"+(this.state.page===n?" hidden":""),value:">|",onClick:function(){return e.setState({page:n})}}))))}}]),t}(a.Component),F=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).onClick=function(){n.setState({selected:!n.state.selected},(function(){n.props.setSelected(n.state.selected)}))},n.state={Selected:n.props.selected},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setState({selected:this.props.selected})}},{key:"render",value:function(){return this.state.selected?s.a.createElement("div",{className:"h2 w3 br2 bg-light-blue flex justify-center items-center"},s.a.createElement("button",{className:"w-90 h-75 br2 bn bg-white",onClick:this.onClick},s.a.createElement("img",{src:this.props.selectedIcon,alt:"barcode",className:"w-100 h-100"}))):s.a.createElement("button",{className:"h2 w3 br2 bn bg-blue b--blue",onClick:this.onClick},s.a.createElement("img",{src:this.props.unselectedIcon,alt:"barcode",className:"w-100 h-100"}))}}]),t}(a.Component),R=n(30),A=n.n(R),D=n(31),B=n.n(D),M=n(32),U=n.n(M),P=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"flex justify-between"},s.a.createElement("div",{className:"ma2"},s.a.createElement("span",{className:"f4 mr2"},"FIXTURE ID:"),s.a.createElement("span",{className:"underline f4"},this.props.fixtureId)),s.a.createElement("div",{className:"flex"},s.a.createElement(F,{selectedIcon:A.a,unselectedIcon:B.a,selected:this.props.scannerMode,setSelected:this.props.setScannerMode}),s.a.createElement("button",{className:"h2 w2 br2 bg-blue b--blue bn ml1",onClick:function(){}},s.a.createElement("img",{src:U.a,alt:"Magnifying Glass",className:"w-100 h-100"}))))}}]),t}(a.Component),K=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleTextChange=function(e){n.setState({text:e.target.value}),n.props.scannerMode&&n.onSubmit(e.target.value)},n.onSubmit=function(e){n.props.saveUpc(e),n.setState({text:""})},n.returnFocus=function(){null!=n.textField.current&&(n.textField.current.focus(),n.props.scannerMode&&(n.textField.current.setAttribute("readonly",!0),setTimeout((function(){n.textField.current.removeAttribute("readonly")}),100)))},n.textField=s.a.createRef(),n.state={text:""},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"w-100 flex flex-column mv2"},s.a.createElement("input",{type:"text",placeholder:"Type product barcode here...",value:this.state.text,ref:this.textField,onChange:this.handleTextChange,onClick:this.returnFocus,className:"w-100 h2 mb1 br2 ph1"}),s.a.createElement("input",{type:"button",value:"ENTER",className:"w-100 f5 b white bw0 br2 dim h2"+(""===this.state.text?"":" bg-green"),onClick:function(){return e.onSubmit(e.state.text)},disabled:""===this.state.text}))}}]),t}(a.Component);var W=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).resetState=function(){n.props.setSkuCountList({skuCountList:{}}),n.returnFocus()},n.returnFocus=function(){null!=n.textInput.current&&n.textInput.current.returnFocus()},n.setScannerMode=function(e){n.setState({scannerMode:e})},n.handleSkuSaveWithId=function(e){var t=Object.assign({},n.props.skuCountList);if(t[e]){var a=t[e];delete t[e],t[e]=a+1}else e&&(t[e]=1);n.props.setSkuCountList({skuCountList:t}),n.returnFocus()},n.disableButton=function(){return!n.props.skuCountList||0===Object.entries(n.props.skuCountList).length},n.setSearchTerm=function(e){return n.EditableTable.current.setSearchTerm(e)},n.onClickClear=function(){y.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCloseButton:!0,confirmButtonColor:"#3085d6",confirmButtonText:"Yes, clear it!"}).then((function(e){e.value&&n.resetState()}))},n.textInput=s.a.createRef(),n.EditableTable=s.a.createRef(),n.state={scannerMode:!0},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.returnFocus()}},{key:"render",value:function(){var e=this;return this.props.fixtureId?s.a.createElement("div",null,s.a.createElement("div",{className:"flex flex-column ma3"},s.a.createElement(P,{scannerMode:this.state.scannerMode,setScannerMode:this.setScannerMode,fixtureId:this.props.fixtureId}),s.a.createElement(L,{skuCountList:this.props.skuCountList,setSkuCountList:this.props.setSkuCountList,afterDelete:this.returnFocus,ref:this.EditableTable}),s.a.createElement(K,{ref:this.textInput,scannerMode:this.state.scannerMode,saveUpc:this.handleSkuSaveWithId}),s.a.createElement("div",{className:"flex w-100"},s.a.createElement("input",{type:"button",value:"CLEAR",className:"flex-grow-1 f5 b white bw0 h2 br2 mr1"+(this.disableButton()?"":" bg-dark-red"),onClick:this.onClickClear,disabled:this.disableButton()}),s.a.createElement(h.b,{to:function(t){return e.disableButton()?t.pathname:"/review"},className:"noLink flex-grow-1 ml1"},s.a.createElement("input",{type:"button",value:"REVIEW",className:"w-100 f5 b white bw0 h2 br2"+(this.disableButton()?"":" bg-blue")}))))):s.a.createElement(O.a,{push:!0,to:"/"})}}]),t}(a.Component),J=Object(p.b)((function(e){return{fixtureId:e.fixtureId,skuCountList:e.skuCountList}}),(function(e){return{setSkuCountList:function(t){return e(E(t))}}}))(W),X=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(s)))).clearState=function(){n.props.setSkuCountList({skuCountList:{}}),n.props.setFixtureId({fixtureId:null})},n.onClickSubmit=function(){y.a.fire({title:"Submission",text:"Enter your employee ID",input:"text",inputAttributes:{autocapitalize:"off"},showCloseButton:!0,confirmButtonText:"Confirm",showLoaderOnConfirm:!0,preConfirm:n.onClickSubmitEmployeeId,allowOutsideClick:function(){return!y.a.isLoading()}}).then((function(e){e.value&&n.onSuccessSubmission()}))},n.onClickSubmitEmployeeId=function(e){var t=n.props,a=t.fixtureId,s=t.skuCountList;return x(e,a,s,(function(){}),(function(e){return y.a.showValidationMessage("".concat(e))}))},n.onSuccessSubmission=function(){y.a.fire({title:"Successful!",text:"The records has been submitted.",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"Start New Count",allowOutsideClick:!1,allowEscapeKey:!1}).then((function(e){e.value&&n.clearState()}))},n.disableButton=function(){return!n.props.skuCountList||0===Object.entries(n.props.skuCountList).length},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.fixtureId?s.a.createElement("div",null,s.a.createElement("div",{className:"flex flex-column ma3"},s.a.createElement("div",{className:"flex ma2"},s.a.createElement("span",{className:"f4 mr2"},"FIXTURE ID:"),s.a.createElement("span",{className:"underline f4"},this.props.fixtureId)),s.a.createElement("div",null,s.a.createElement(L,{skuCountList:this.props.skuCountList,setSkuCountList:this.props.setSkuCountList})),s.a.createElement("div",{className:"flex flex-column"},s.a.createElement("button",{className:"w-100 f5 b white bw0 h2 br2"+(this.disableButton()?"":" bg-blue"),disabled:this.disableButton(),onClick:this.onClickSubmit},"SUBMIT")))):s.a.createElement(O.a,{push:!0,to:"/"})}}]),t}(a.Component),G=Object(p.b)((function(e){return{fixtureId:e.fixtureId,skuCountList:e.skuCountList}}),(function(e){return{setSkuCountList:function(t){return e(E(t))},setFixtureId:function(t){return e(g(t))}}}))(X);n(43);var H=function(){return s.a.createElement(h.a,{basename:"/inventory-control"},s.a.createElement("div",null,s.a.createElement(O.b,{exact:!0,path:"/"},s.a.createElement(C,null)),s.a.createElement(O.b,{exact:!0,path:"/start"},s.a.createElement(N,null)),s.a.createElement(O.b,{exact:!0,path:"/scan"},s.a.createElement(J,null)),s.a.createElement(O.b,{exact:!0,path:"/review"},s.a.createElement(G,null))))},Y=(n(44),n(20)),V="fixtureId",_="skuCountList",z={fixtureId:localStorage.getItem(V),skuCountList:null===localStorage.getItem(_)?{}:JSON.parse(localStorage.getItem(_))};var Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;return t.type===b?(0===Object.entries(t.payload.skuCountList).length?localStorage.removeItem(_):localStorage.setItem(_,JSON.stringify(t.payload.skuCountList)),Object.assign({},e,{skuCountList:t.payload.skuCountList})):t.type===v?(null===t.payload.fixtureId?localStorage.removeItem(V):localStorage.setItem(V,t.payload.fixtureId),Object.assign({},e,{fixtureId:t.payload.fixtureId})):e},$=Object(Y.b)(Q);n(45);i.a.render(s.a.createElement(p.a,{store:$},s.a.createElement(H,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/inventory-control",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/inventory-control","/service-worker.js");o?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):c(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):c(t,e)}))}}()}},[[33,1,2]]]);
//# sourceMappingURL=main.0a007fd8.chunk.js.map